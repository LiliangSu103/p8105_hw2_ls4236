p8105_hw2_ls4236
================
Liliang Su
2025-09-23

## Problem 1

### `pols-month`

First of all, load the required dataset `pols-month` and clean it, and
tidy the data according to the first step.

``` r
pol_df =
  read_csv("./data/pols-month.csv", na = c("NA",".","")) |> 
  janitor::clean_names() |> 
  separate(
    mon,
    into = c("year", "month", "day"),
    sep = "-"
  ) |> 
  mutate(
    year = as.integer(year),
    month = as.integer(month),
    day = as.integer(day)
  ) |> 
  mutate(
    month = case_match(
      month,
      1 ~ "Jan",
      2 ~ "Feb",
      3 ~ "Mar",
      4 ~ "Apr",
      5 ~ "May",
      6 ~ "Jun",
      7 ~ "Jul",
      8 ~ "Aug",
      9 ~ "Sep",
      10 ~ "Oct",
      11 ~ "Nov",
      12 ~ "Dec"
    ),
    month = str_to_lower(month)
  ) |> 
  mutate(
    president = case_when(
      prez_gop == 1 ~ "gop",
      prez_dem == 1 ~ "dem"
    )
  ) |> 
  select(-prez_gop,-prez_dem,-day)
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

### `snp`

Second of all, load the required dataset `snp` and clean it, and tidy
the data according to the second step.

``` r
snp_df =
  read_csv("./data/snp.csv", na = c("NA",".","")) |> 
  janitor::clean_names() |> 
  separate(
    date,
    into = c("month", "day", "year"),
    sep = "/"
  ) |> 
  mutate(
    year = as.integer(year),
    year = ifelse(year < 16, 2000 + year, 1900 + year),
    month = as.integer(month),
    day = as.integer(day)
  ) |> 
  arrange(year, month) |> 
  mutate(
    month = case_match(
      month,
      1 ~ "Jan",
      2 ~ "Feb",
      3 ~ "Mar",
      4 ~ "Apr",
      5 ~ "May",
      6 ~ "Jun",
      7 ~ "Jul",
      8 ~ "Aug",
      9 ~ "Sep",
      10 ~ "Oct",
      11 ~ "Nov",
      12 ~ "Dec"
    ),
    month = str_to_lower(month)
  ) |> 
  relocate(year, month) |> 
  select(-day)
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

### `unemployment`

Third of all, load the required dataset `unemployment` and clean it, and
tidy the data according to the third step.

``` r
une_df =
  read_csv("./data/unemployment.csv", na = c("NA",".","")) |> 
  janitor::clean_names() |> 
  pivot_longer(
    cols = jan:dec,
    names_to = "month",
    values_to = "une_rate"
  )
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

### Merge

Lastly, merge them in the order of `pol`, `snp`, `une`.

``` r
merge_df =
  pol_df |> 
  left_join(snp_df, by = c("year", "month")) |> 
  left_join(une_df, by = c("year", "month"))

head(merge_df,10)
```

    ## # A tibble: 10 × 11
    ##     year month gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president close
    ##    <dbl> <chr>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>     <dbl>
    ##  1  1947 jan        23      51     253      23      45     198 dem          NA
    ##  2  1947 feb        23      51     253      23      45     198 dem          NA
    ##  3  1947 mar        23      51     253      23      45     198 dem          NA
    ##  4  1947 apr        23      51     253      23      45     198 dem          NA
    ##  5  1947 may        23      51     253      23      45     198 dem          NA
    ##  6  1947 jun        23      51     253      23      45     198 dem          NA
    ##  7  1947 jul        23      51     253      23      45     198 dem          NA
    ##  8  1947 aug        23      51     253      23      45     198 dem          NA
    ##  9  1947 sep        23      51     253      23      45     198 dem          NA
    ## 10  1947 oct        23      51     253      23      45     198 dem          NA
    ## # ℹ 1 more variable: une_rate <dbl>

### Summary

Overall, the three datasets together cover a series of political and
economic indicators.

The `pols-month` dataset includes 822 observations of 9
dimentions(variables) tracking the number of national politicians
monthly by party affiliation, spanning from 1947 to 2015. The key
variables include presidential party, number of governors, senators, and
representatives of both parties.

The `snp` dataset provide 787 observations of monthly S&P 500 closing
values from 1950 to 2015, which can be seen as an indicator of stock
market performance.

The `unemployment` dataset contains 68 observations with monthly
unemployment rate spanning from 1948 to 2015.

After cleaning and merging, the resulting dataset combines these data
into a comprehensive dataset with 822 rows and 11 variables, from 1947
to 2015. Key integrated variables include presidential party affiliation
(converted to a single president variable), S&P 500 closing values
(close), unemployment rates (une_rate), and detailed counts of
politicians by party.
